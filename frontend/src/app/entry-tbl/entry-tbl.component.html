<div class="container entry-section">
  <section>
    <h3>Entry Data</h3>
    <div class="container entry-search text-right">
      <form [formGroup]="searchForm">
        <div class=" ">
          <input class="" type="text" id="" class="entry-search-input" placeholder="Keyword" formControlName="searchInput">
          <select class="d-inline browser-default entry-select" formControlName="searhOption" placeholder="Option">
            <option></option>
            <option value="1">Engine</option>
            <option value="2">Chassis</option>
            <option value="3">Supplier</option>
            <option value="4">Date</option>
          </select>
          <button type="button" class="btn btn-outline-dark entry-search-btn" (click)="search()">Search</button>
        </div>
      </form>
    </div>

    <ng-template [ngIf]="mainTable === true">
      <div class="row">
        <div class="col-md-4 entry-pad" *ngFor="let entry of entryTable | paginate: { itemsPerPage: tableSize, currentPage: page }">
          <div class="card shadow">
            <div class="entry-chassis">
              <p class="lead"><small>Engine #</small></p>
              <h5>{{ entry.engineNum }}</h5>
            </div>
            <div class="card-body">
              <p class="card-text"><small class="text-muted">Chasis #</small></p>
              <p class="entry-fields">{{entry.chassisNum}}</p>
              <p class="card-text"><small class="text-muted">Body Code</small></p>
              <p class="entry-fields">{{entry.bodyCode}}</p>
              <p class="card-text"><small class="text-muted">Supplier</small></p>
              <p class="entry-fields">{{entry.supplier}}</p>
              <p class="card-text"><small class="text-muted">Container</small></p>
              <p class="entry-fields">{{entry.containerNum}}</p>
              <p class="card-text"><small class="text-muted">Description</small></p>
              <p class="entry-fields">{{entry.unitDesc}}</p>
              <p class="card-text"><small class="text-muted">Date</small></p>
              <p class="entry-fields">{{entry.date | slice:0:10}}</p>
              <p class="card-text"><small class="text-muted">{{ entry._id }}</small></p>
              <hr>
            </div>
            <div class="card-footer bg-transparent border-success">
              <a type="button" (click)="open(content, entry)" class="entry-edit" title="Update entry" data-toggle="tooltip"><i-feather name="edit"></i-feather></a>
              <a tyope="button" (click)="openDel(del, entry)" class="entry-delete"  data-toggle="tooltip"><i-feather name="x-octagon"></i-feather></a>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-center">
        <pagination-controls
          previousLabel="Prev"
          nextLabel="Next"
          (pageChange)="onTableDataChange($event)">
        </pagination-controls>
      </div>
    </ng-template>

    <ng-template [ngIf]="searchTable === true">
      <div class="row" *ngIf="entryTable.length > 0">
        <div class="col-md-4 entry-pad" *ngFor="let entry of entryTable | paginate: { itemsPerPage: tableSize, currentPage: page }">
          <div class="card shadow">
            <div class="entry-chassis">
              <p class="lead"><small>Engine #</small></p>
              <h5>{{ entry.engineNum }}</h5>
            </div>
            <div class="card-body">
              <p class="card-text"><small class="text-muted">Chasis #</small></p>
              <p class="entry-fields">{{entry.chassisNum}}</p>
              <p class="card-text"><small class="text-muted">Body Code</small></p>
              <p class="entry-fields">{{entry.bodyCode}}</p>
              <p class="card-text"><small class="text-muted">Supplier</small></p>
              <p class="entry-fields">{{entry.supplier}}</p>
              <p class="card-text"><small class="text-muted">Container</small></p>
              <p class="entry-fields">{{entry.containerNum}}</p>
              <p class="card-text"><small class="text-muted">Description</small></p>
              <p class="entry-fields">{{entry.unitDesc}}</p>
              <p class="card-text"><small class="text-muted">Date</small></p>
              <p class="entry-fields">{{entry.date | slice:0:10}}</p>
              <p class="card-text"><small class="text-muted">{{ entry._id }}</small></p>
              <hr>
            </div>
            <div class="card-footer bg-transparent border-success">
              <a type="button" (click)="open(content, entry)" class="entry-edit" title="Update entry" data-toggle="tooltip"><i-feather name="edit"></i-feather></a>
              <a tyope="button" (click)="openDel(del, entry)" class="entry-delete"  data-toggle="tooltip"><i-feather name="x-octagon"></i-feather></a>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-center" id="entry-pagination" *ngIf="showPagination">
        <pagination-controls
          previousLabel="Prev"
          nextLabel="Next"
          (pageChange)="onTableDataChange($event)">
        </pagination-controls>
      </div>
    </ng-template>
  </section>

  <section>
    <ng-template #content let-modal>
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Entry Update</h4>
      </div>
      <div class="modal-body">
        <form [formGroup]="entryFormUpdate">
          <div *ngIf="editSuccess === true ; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock><span class="text-success">{{ editMessage }}</span></ng-template>
            <ng-template #elseBlock>
              <div class="form-group">
                <label for="dateOfBirth">Id</label>
                <div class="input-group">
                  <input class="entry-form" type="text" id="id" class="form-control entry-form " placeholder="Id" formControlName="id">
                </div>
                <label for="dateOfBirth">Engine Numbers</label>
                <div class="input-group">
                  <input class="entry-form" type="text" id="engine" class="form-control entry-form " placeholder="Engine #" formControlName="engineNum" required>
                </div>
                <label for="dateOfBirth">Chasis Number</label>
                <div class="input-group">
                  <input class="entry-form" type="text" id="chassis" class="form-control entry-form" placeholder="Chassis #" formControlName="chassisNum" required>
                </div>
                <label for="dateOfBirth">Body Code</label>
                <div class="input-group">
                <input class="entry-form" type="text" id="body-code" class="form-control entry-form" placeholder="Body Code" formControlName="bodyCode" required>
                </div>
                <label for="dateOfBirth">Supplier</label>
                <div class="input-group">
                <input class="entry-form" type="text" id="supplier" class="form-control entry-form" placeholder="Supplier" formControlName="supplier" required>
                </div>
                <label for="dateOfBirth">Container Number</label>
                <div class="input-group">
                  <input class="entry-form" type="text" id="container" class="form-control entry-form" placeholder="Container #" formControlName="containerNum" required>
                </div>
                <label for="dateOfBirth">Unit Descripton</label>
                <div class="input-group">
                <textarea class="entry-form" type="text" id="desc" class="form-control entry-form" placeholder="Unit Description" formControlName="unitDesc"></textarea>
                </div>
              </div>
            </ng-template>
        </form>
      </div>

      <div class="modal-footer" *ngIf="editSuccess === false">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button>
        <button type="button" class="btn btn-outline-dark" (click)="onSubmit()">Save</button>
      </div>
      <div class="modal-footer" *ngIf="editSuccess === true">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
      </div>
      <div class="modal-footer">

      </div>
    </ng-template>
    <hr>
  </section>
  <section>
    <ng-template #del let-modal>
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Delete Entry</h4>
      </div>
      <div class="modal-body">
        <form [formGroup]="entryFormUpdate">
          <div class="modal-body">
            <div *ngIf="delSuccess === true ; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock><span class="text-success">{{ delMessage }}</span></ng-template>
            <ng-template #elseBlock>
              <p>Are you sure you want to delete this data?</p>
              <p>Engine #: {{ engineNum }}, Chassis #: {{ chassisNum }}, Body Code: {{ bodyCode }}</p>
              <p>All information associated to this entry will be permanently deleted.
              <span class="text-danger">This operation can not be undone.</span>
              </p>
            </ng-template>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button>
        <button type="button" class="btn btn-outline-dark" (click)="onDelete()">Delete</button>
      </div>
      <div class="modal-footer">

      </div>
    </ng-template>
  </section>
</div>



