<section>
  <h3>Production Data</h3>
  <div class="container entry-search text-right">
    <form [formGroup]="searchForm">
      <div class=" ">
        <div class="input-group entry-date" *ngIf="inputKey === false">
          <input class="form-control" placeholder="yyyy-mm-dd"
                 name="dp" ngbDatepicker #d="ngbDatepicker" formControlName="date">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"></button>
          </div>
        </div>
        <input *ngIf="inputKey === true" class="" type="text" id="" class="entry-search-input" placeholder="Keyword" formControlName="searchInput">
        <select class="d-inline browser-default entry-select" formControlName="searhOption" placeholder="Option" (change)="search()">
          <option [selected]="isSelected">Default</option>
          <option value="1">Sold To</option>
          <option value="2">Chassis</option>
          <!-- <option value="3">Body Type</option> -->
          <option value="4">Date</option>
        </select>
        <button type="button" class="btn btn-outline-dark entry-search-btn" (click)="search()">Search</button>
      </div>
    </form>
  </div>

  <div class="row">
    <div class="col-sm-4 entry-pad" *ngFor="let entry of entryTable | paginate : {
      itemsPerPage: tableSize,
      currentPage: page,
      totalItems: count
    };
    let i = index">
      <div class="card entry-card">
        <div class="entry-chassis">
          <p class="lead"><small>Chassis #</small></p>
          <h5 class="card-title text-center">{{ entry.chassisNum }}</h5>
        </div>
        <div class="card-body">
          <p>
            <button class="btn btn-secondary shadow" type="button" data-toggle="collapse" [attr.data-target]="'#collapseExample' + i" aria-expanded="false" aria-controls="collapseExample">
              Show More
            </button>
          </p>
          <div class="collapse" [attr.id]="'collapseExample' + i">
            <div class="card card-body">
              <div class="card prod-card">
                <div class="card-body shadow-lg">
                  <p class="card-text"><small class="text-muted">Conversion</small></p>
                  <p class="entry-fields">{{ entry.conversion}}</p>
                  <p class="card-text"><small class="text-muted">Conversion Date</small></p>
                  <p class="entry-fields">{{ entry.conDate | slice:0:10 }}</p>
                  <p class="card-text"><small class="text-muted">Conversion Status</small></p>
                  <p class="entry-fields">{{ entry.con_stat}}</p>
                  <p class="card-text"><small class="text-muted">Painting</small></p>
                  <p class="entry-fields">{{ entry.painting}}</p>
                  <p class="card-text"><small class="text-muted">Painting Date</small></p>
                  <p class="entry-fields" [class.entry-updated]="entry.paint_started === '2021-01-01'">{{ entry.paint_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">Painting Status</small></p>
                  <p class="entry-fields">{{ entry.paint_stat}}</p>
                  <p class="card-text"><small class="text-muted">Mechanical</small></p>
                  <p class="entry-fields">{{ entry.mechanical}}</p>
                  <p class="card-text"><small class="text-muted">Mechanical Date</small></p>
                  <p class="entry-fields">{{ entry.mec_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">Mechanical Status</small></p>
                  <p class="entry-fields">{{ entry.mec_stat}}</p>
                  <p class="card-text"><small class="text-muted">Electrical</small></p>
                  <p class="entry-fields">{{ entry.electrical}}</p>
                  <p class="card-text"><small class="text-muted">Electrical Date</small></p>
                  <p class="entry-fields">{{ entry.elec_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">Electrical Status</small></p>
                  <p class="entry-fields">{{ entry.elec_stat}}</p>
                  <p class="card-text"><small class="text-muted">Upholstery</small></p>
                  <p class="entry-fields">{{ entry.upholstery}}</p>
                  <p class="card-text"><small class="text-muted">Upholstery Date</small></p>
                  <p class="entry-fields">{{ entry.up_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">Upholstery Status</small></p>
                  <p class="entry-fields">{{ entry.up_stat}}</p>
                  <p class="card-text"><small class="text-muted">Trimmer</small></p>
                  <p class="entry-fields">{{ entry.trimmer}}</p>
                  <p class="card-text"><small class="text-muted">Trimmer Date</small></p>
                  <p class="entry-fields">{{ entry.trim_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">Trimmer Status</small></p>
                  <p class="entry-fields">{{ entry.trim_stat}}</p>
                  <p class="card-text"><small class="text-muted">Dashboard</small></p>
                  <p class="entry-fields">{{ entry.dashboard}}</p>
                  <p class="card-text"><small class="text-muted">Dashboard Date</small></p>
                  <p class="entry-fields">{{ entry.dash_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">Dashboard Status</small></p>
                  <p class="entry-fields">{{ entry.dash_stat}}</p>
                  <p class="card-text"><small class="text-muted">Detailing</small></p>
                  <p class="entry-fields">{{ entry.detailing}}</p>
                  <p class="card-text"><small class="text-muted">Detailing Date</small></p>
                  <p class="entry-fields">{{ entry.det_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">Detailing Status</small></p>
                  <p class="entry-fields">{{ entry.det_stat}}</p>
                  <p class="card-text"><small class="text-muted">QC</small></p>
                  <p class="entry-fields">{{ entry.qc}}</p>
                  <p class="card-text"><small class="text-muted">QC Date</small></p>
                  <p class="entry-fields">{{ entry.qc_started | slice:0:10}}</p>
                  <p class="card-text"><small class="text-muted">QC Status</small></p>
                  <p class="entry-fields">{{ entry.qc_stat}}</p>
                  <p class="card-text"><small class="text-muted">Sold to</small></p>
                  <p class="card-text">{{ entry.sold_to }}</p>
                  <p class="card-text"><small class="text-muted">ID</small></p>
                  <p class="entry-fields"><small class="text-muted">{{ entry._id }}</small></p>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer bg-transparent border-success">
            <a type="button" (click)="open(content, entry)" class="entry-edit" title="Update entry" data-toggle="tooltip"><i-feather name="edit"></i-feather></a>
            <a tyope="button" (click)="openDel(del, entry)" class="entry-delete"  data-toggle="tooltip"><i-feather name="x-octagon"></i-feather></a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex justify-content-center">
    <pagination-controls
      previousLabel="Prev"
      nextLabel="Next"
      (pageChange)="onTableDataChange($event)">
    </pagination-controls>
  </div>
</section>

<section>
  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Registration Update</h4>
    </div>
    <div class="modal-body">
      <form [formGroup]="prodFormUpdate">
        <div *ngIf="editSuccess === true ; then thenBlock else elseBlock"></div>
          <ng-template #thenBlock><span class="text-success">{{ editMessage }}</span></ng-template>
          <ng-template #elseBlock>
            <div class="form-row">
              <div class="form-group col-md-4">
                <label for="chassisNum">Chasis Number</label>
                <input type="text" class="form-control" id="chassisNum" placeholder="" formControlName="chassisNum" required>
              </div>
              <div class="form-group col-md-4">
                <label for="chassisNum">Conversion</label>
                <input type="text" class="form-control" id="chassisNum" placeholder="" formControlName="conversion" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="conDate">Conversion Date</label>
                <div class="input-group">
                  <input class="form-control reg-date" placeholder="yyyy-mm-dd"
                         name="conDate" ngbDatepicker #d="ngbDatepicker" formControlName="conDate">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="paint_stat">Conversion Status</label>
                <input class="form-control" list="con_stats" name="con_stat" id="con_stat" formControlName="con_stat" required>
                <datalist id="con_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label for="sold_to">Sold To</label>
                <input type="text" class="form-control" id="sold_to" placeholder="" formControlName="sold_to" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="painting">Painting</label>
                <input type="text" class="form-control" id="painting" placeholder="" formControlName="painting" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="paint_started">Painting Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="paint_started" ngbDatepicker #paint="ngbDatepicker" formControlName="paint_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="paint.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="paint_stat">Painting Status</label>
                <input class="form-control" list="paint_stats" name="paint_stat" id="paint_stat" formControlName="paint_stat" required>
                <datalist id="paint_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="mechanical">Mechanical</label>
                <input type="text" class="form-control" id="mechanical" placeholder="" formControlName="mechanical" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="mec_started">Mechanical Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="mec_started" ngbDatepicker #mec_started="ngbDatepicker" formControlName="mec_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="mec_started.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="mec_stat">Mechanical Status</label>
                <input class="form-control" list="mec_stats" name="mec_stat" id="mec_stat" formControlName="mec_stat" required>
                <datalist id="mec_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="electrical">Electrical</label>
                <input type="text" class="form-control" id="electrical" placeholder="" formControlName="electrical" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="elec_started">Electrical Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="elec_started" ngbDatepicker #elec_started="ngbDatepicker" formControlName="elec_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="elec_started.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="mec_stat">Electrical Status</label>
                <input class="form-control" list="elec_stats" name="mec_stat" id="elec_stat" formControlName="elec_stat" required>
                <datalist id="elec_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="upholstery">Upholstery</label>
                <input type="text" class="form-control" id="upholstery" placeholder="" formControlName="upholstery" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="up_started">Upholstery Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="up_started" ngbDatepicker #up_started="ngbDatepicker" formControlName="up_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="up_started.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="up_stat">Upholstery Status</label>
                <input class="form-control" list="up_stats" name="up_stat" id="up_stat" formControlName="up_stat" required>
                <datalist id="up_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="trimmer">Trimmer</label>
                <input type="text" class="form-control" id="trimmer" placeholder="" formControlName="trimmer" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="trim_started">Trimmer Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="trim_started" ngbDatepicker #trim_started="ngbDatepicker" formControlName="trim_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="trim_started.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="trim_stat">Trimmer Status</label>
                <input class="form-control" list="trim_stats" name="trim_stat" id="trim_stat" formControlName="trim_stat" required>
                <datalist id="trim_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="dashboard">Dashboard</label>
                <input type="text" class="form-control" id="dashboard" placeholder="" formControlName="dashboard" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="dash_started">Dashboard Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="dash_started" ngbDatepicker #dash_started="ngbDatepicker" formControlName="dash_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="dash_started.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="dash_stat">Dashboard Status</label>
                <input class="form-control" list="dash_stats" name="dash_stat" id="dash_stat" formControlName="dash_stat" required>
                <datalist id="dash_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="detailing">Detailing</label>
                <input type="text" class="form-control" id="detailing" placeholder="" formControlName="detailing" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="det_started">Detailing Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="det_started" ngbDatepicker #det_started="ngbDatepicker" formControlName="det_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="det_started.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="dash_stat">Detailing Status</label>
                <input class="form-control" list="det_stats" name="det_stat" id="det_stat" formControlName="det_stat" required>
                <datalist id="det_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="qc">QC</label>
                <input type="text" class="form-control" id="qc" placeholder="" formControlName="qc" required>
              </div>
              <div class="form-group col-md-4">
                <label class="entry-label" for="qc_started">QC Started</label>
                <div class="input-group">
                  <input class="form-control" placeholder="yyyy-mm-dd"
                         name="qc_started" ngbDatepicker #qc_started="ngbDatepicker" formControlName="qc_started">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary calendar" (click)="qc_started.toggle()" type="button"></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="dash_stat">QC Status</label>
                <input class="form-control" list="qc_stats" name="qc_stat" id="qc_stat" formControlName="qc_stat" required>
                <datalist id="qc_stats">
                  <option value="Ongoing">
                  <option value="Onhold">
                  <option value="Done">
                </datalist>
              </div>
            </div>
          </ng-template>
      </form>
    </div>

    <div class="modal-footer" *ngIf="editSuccess === false">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button>
      <button type="button" class="btn btn-outline-dark" (click)="onSubmit()">Save</button>
    </div>
    <div class="modal-footer" *ngIf="editSuccess === true">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
    </div>
  </ng-template>
  <hr>
</section>
<section>
  <ng-template #del let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Delete Registration</h4>
    </div>
    <div class="modal-body">
      <form>
        <div class="modal-body">
          <div *ngIf="delSuccess === true ; then thenBlock else elseBlock"></div>
          <ng-template #thenBlock><span class="text-success">{{ delMessage }}</span></ng-template>
          <ng-template #elseBlock>
            <p>Are you sure you want to delete this data?</p>
            <p>Chassis #: {{ chassisNum }}</p>
            <p>All information associated to this entry will be permanently deleted.
            <span class="text-danger">This operation can not be undone.</span>
            </p>
          </ng-template>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button>
      <button type="button" class="btn btn-outline-dark" (click)="onDelete()">Delete</button>
    </div>
    <div class="modal-footer">

    </div>
  </ng-template>

</section>


